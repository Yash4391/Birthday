<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>💌 A Little Quiz for Umra</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(to right, #4b0000, #800020);
      color: #fff;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      overflow: hidden;
      position: relative;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 3rem;
      margin-bottom: 20px;
      color: #ffdde1;
      position: relative;
      z-index: 1;
    }

    p {
      font-size: 1.2rem;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }

    input {
      padding: 10px;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      margin-right: 10px;
      width: 180px;
      position: relative;
      z-index: 1;
    }

    button {
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      background: #b3003b;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      z-index: 1;
    }

    button:hover {
      background: #ff004d;
    }

    #openBtn {
      display: none; /* hidden by default */
      margin-top: 20px;
      padding: 15px 30px;
      font-size: 1.2rem;
      border-radius: 50px;
      box-shadow: 0 0 15px rgba(255,0,80,0.5);
      text-decoration: none;
      color: #fff;
      background: #b3003b;
      display: inline-block;
      position: relative;
      z-index: 1;
    }

    #openBtn:hover {
      background: #ff004d;
      box-shadow: 0 0 25px rgba(255,0,80,0.7);
    }

    .message {
      margin-top: 10px;
      height: 24px;
      position: relative;
      z-index: 1;
    }

    /* Mute/unmute icon style */
    #muteIcon {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 2rem;
      cursor: pointer;
      z-index: 10;
      user-select: none;
      transition: transform 0.2s;
    }

    #muteIcon:hover {
      transform: scale(1.2);
    }
  </style>
</head>
<body>

  <canvas id="questionCanvas"></canvas>

  <!-- Mute/Unmute Icon -->
  <div id="muteIcon">🔊</div>

  <div>
    <h1>💌 A Little Quiz for Umra</h1>
    <p>Answer correctly to go to next page!</p>
    <p class="question">What was the name of the book I recommended you to read?</p>
    <input type="text" id="answerInput" placeholder="Type your answer...">
    <button onclick="checkAnswer()">Submit</button>
    <div class="message" id="message"></div>
    <br>
    <a href="reasons.html" id="openBtn" style="display:none;">Open My Letters 💌</a>
  </div>

  <!-- Background Music -->
  <audio id="birthdayMusic" loop>
    <source src="happy.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    // Quiz check
    function checkAnswer() {
      const answer = document.getElementById('answerInput').value.trim().toLowerCase();
      const message = document.getElementById('message');
      const openBtn = document.getElementById('openBtn');

      const regex = /^(the\s+|a\s+)?housemaid$/i;

      if (regex.test(answer)) {
        message.style.color = '#00ff99';
        message.textContent = "I cut you some slack because it's my baby's birthday 💖";
        openBtn.style.display = 'inline-block'; // show button
      } else {
        message.style.color = '#ff6666';
        message.textContent = "Try again Baby ❤️";
        openBtn.style.display = 'none'; // hide button if wrong
      }
    }

    // Background Music & Mute Icon
    const music = document.getElementById('birthdayMusic');
    const muteIcon = document.getElementById('muteIcon');
    let musicStarted = false;

    function startMusic() {
      if (!musicStarted) {
        music.play().catch(() => console.log('Autoplay blocked'));
        musicStarted = true;
      }
    }

    window.addEventListener('click', startMusic, { once: true });
    window.addEventListener('touchstart', startMusic, { once: true });

    muteIcon.addEventListener('click', () => {
      if (music.muted || music.paused) {
        music.muted = false;
        music.play();
        muteIcon.textContent = '🔊';
      } else {
        music.muted = true;
        muteIcon.textContent = '🔇';
      }
    });

    // Question Marks Animation
    const canvas = document.getElementById('questionCanvas');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = window.innerWidth;
    let H = canvas.height = window.innerHeight;

    const qCount = 100;
    const questions = [];

    function random(min,max){ return Math.random()*(max-min)+min; }

    class QuestionMark {
      constructor(){
        this.x = random(0,W);
        this.y = random(-H,0);
        this.size = random(15,30);
        this.speed = random(1,3);
        this.angle = random(0,Math.PI*2);
        this.angularSpeed = random(0.01,0.03);
      }
      update(){
        this.y += this.speed;
        this.angle += this.angularSpeed;
        if(this.y>H){
          this.y = random(-50,0);
          this.x = random(0,W);
        }
      }
      draw(){
        ctx.save();
        ctx.translate(this.x,this.y);
        ctx.rotate(this.angle);
        ctx.fillStyle = '#00bfff';
        ctx.font = `${this.size}px Arial`;
        ctx.fillText('?',0,0);
        ctx.restore();
      }
    }

    for(let i=0;i<qCount;i++) questions.push(new QuestionMark());

    function animateQuestions(){
      ctx.clearRect(0,0,W,H);
      questions.forEach(q=>{ q.update(); q.draw(); });
      requestAnimationFrame(animateQuestions);
    }

    animateQuestions();

    window.addEventListener('resize', () => {
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>